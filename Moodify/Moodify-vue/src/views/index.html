<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moodify</title>
    <link rel="stylesheet" href="../assets/styles/styles.css">
    <link rel="stylesheet" href="../assets/styles/dark-mode.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  </head>
  <body>
    <!-- 主题切换按钮 -->
    <button class="theme-toggle" id="themeToggle">
      <span class="material-symbols-outlined">dark_mode</span>
    </button>
    
    <!-- 顶部导航 -->
    <nav class="top-nav">
      <!-- 品牌标识 -->
      <div class="brand">
        <div class="brand-logo">
          <span>M</span>
        </div>
        <div class="brand-name">Moodify</div>
      </div>
      
      <!-- 导航菜单 -->
      <div class="nav-items">
        <div class="top-item active" onclick="home()">
          <span class="top-text">首页</span>
        </div>
        <div class="top-item" onclick="app()">
          <span class="top-text">生成</span>
        </div>
        <div class="top-item" onclick="community()">
          <span class="top-text">社区</span>
        </div>
        <div class="top-item" onclick="profile()">
          <span class="top-text">我的</span>
        </div>
      </div>
    </nav>
    
    <!-- 标题和背景 -->
    <div class="main-content">
      <div class="title-container">
        <h1>Moodify</h1>
        <div id="typing-text"></div>
      </div>
      <div class="background"></div>
    </div>
    
    <!-- 预览板块 -->
    <section class="preview-section">
        <div class="preview-container">
            <div class="text-preview">
                <div class="preview-header">
                    <h3>情感表达</h3>
                    <div class="preview-badges">
                        <span class="badge">AI驱动</span>
                        <span class="badge">视觉艺术</span>
                    </div>
                </div>
                
                <p class="preview-description">通过精心设计的界面，将您的情感转化为视觉艺术。我们提供多种风格选择，让您的情感表达更加丰富多彩。</p>
                
                <div class="feature-grid">
                    <div class="feature-item">
                        <span class="material-symbols-outlined">nature</span>
                        <p>自然场景融合</p>
                    </div>
                    <div class="feature-item">
                        <span class="material-symbols-outlined">psychology</span>
                        <p>多维情感分析</p>
                    </div>
                    <div class="feature-item">
                        <span class="material-symbols-outlined">palette</span>
                        <p>智能色彩匹配</p>
                    </div>
                    <div class="feature-item">
                        <span class="material-symbols-outlined">hd</span>
                        <p>高清画质输出</p>
                    </div>
                </div>
                
                <div class="preview-actions">
                    <button class="preview-btn primary" onclick="app()">开始体验</button>
                    <button class="preview-btn secondary">了解更多</button>
                </div>
            </div>
            <div class="image-preview">
                <div class="image-card">
                    <img src="../assets/images/welcomeback.jpeg" alt="情感画面预览">
                    <div class="image-controls">
                        <button class="control-btn prev"><span class="material-symbols-outlined">chevron_left</span></button>
                        <button class="control-btn next"><span class="material-symbols-outlined">chevron_right</span></button>
                    </div>
                    <div class="image-overlay">
                        <div class="overlay-content">
                            <span class="overlay-title">夏日宁静</span>
                            <span class="overlay-desc">基于"平静"情绪生成</span>
                        </div>
                    </div>
                </div>
                <div class="image-indicators">
                    <span class="indicator active"></span>
                    <span class="indicator"></span>
                    <span class="indicator"></span>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 3D轮播部分 -->
    <section class="carousel-section">
        <h3 class="carousel-title">情感图库</h3>
        <div class="carousel-container">
            <div class="shell">
                <div class="content">
                    <div class="item"></div>
                    <div class="item"></div>
                    <div class="item"></div>
                </div>
            </div>
        </div>
    </section>
    
    <script src="../utils/script.js"></script>
    
    <script>
      function app() {
        window.location.href = 'app.html';
      }
      function home() {
        window.location.href = '/';
      }
      
      function login() {
        window.location.href = 'login.html';
      }
      
      function register() {
        window.location.href = 'login.html';
        // 延迟后显示注册表单
        setTimeout(() => {
          if (typeof showRegister === 'function') {
            showRegister();
          }
        }, 500);
      }
      
      function profile() {
        window.location.href = 'profile.html';
      }
      
      function community() {
        window.location.href = 'community.html';
      }
      
      // 主题切换功能
      const themeToggle = document.getElementById('themeToggle');
      const themeIcon = themeToggle.querySelector('.material-symbols-outlined');
      
      // 检查本地存储中的主题设置
      if(localStorage.getItem('darkMode') === 'enabled'){
        document.body.classList.add('dark-mode');
        themeIcon.textContent = 'light_mode';
      }
      
      themeToggle.addEventListener('click', () => {
        // 切换暗黑模式
        document.body.classList.toggle('dark-mode');
        
        // 更新图标
        if(document.body.classList.contains('dark-mode')){
          themeIcon.textContent = 'light_mode';
          localStorage.setItem('darkMode', 'enabled');
        } else {
          themeIcon.textContent = 'dark_mode';
          localStorage.setItem('darkMode', 'disabled');
        }
      });
      
      // 改进的循环打字机效果
      const typingText = document.getElementById('typing-text');
      // 轮换显示的多条内容
      const textsToType = [
        "与机器交流的第1001次",
        "让AI读懂你的情绪",
        "用色彩表达内心世界",
        "探索数字艺术的无限可能",
        "定制你的专属情感图像"
      ];
      let textIndex = 0;
      let charIndex = 0;
      let isDeleting = false;
      let typingDelay = 150;
      let deletingDelay = 100;
      let pauseDelay = 1500;

      function typeLoop() {
        // 获取当前要显示的文本
        const currentTextToType = textsToType[textIndex];
        const currentText = currentTextToType.substring(0, charIndex);
        typingText.textContent = currentText;
        
        // 如果正在删除文本
        if (isDeleting) {
          charIndex--;
          // 当删除完成时，切换到下一条文本并重新开始打字
          if (charIndex <= 0) {
            charIndex = 0; // 确保索引复位到0
            typingText.textContent = ""; // 强制清空内容
            isDeleting = false;
            // 切换到下一条文本
            textIndex = (textIndex + 1) % textsToType.length;
            setTimeout(typeLoop, pauseDelay); // 暂停片刻再开始打字
            return;
          }
          setTimeout(typeLoop, deletingDelay);
        } 
        // 如果正在打字
        else {
          charIndex++;
          // 当打字完成时，暂停片刻，然后切换到删除状态
          if (charIndex > currentTextToType.length) {
            charIndex = currentTextToType.length; // 确保索引不超过文本长度
            isDeleting = true;
            setTimeout(typeLoop, pauseDelay); // 完成后暂停片刻
            return;
          }
          // 确保显示完整文本
          typingText.textContent = currentTextToType.substring(0, charIndex);
          setTimeout(typeLoop, typingDelay);
        }
      }

      // 当页面加载完成后开始打字效果
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(typeLoop, 1000); // 延迟1秒开始打字
      });
    </script>
  </body>
</html> 